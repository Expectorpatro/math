\section{度量空间上的映射}
\subsection{映射的定义与性质}
\begin{definition}
	设$X,Y$是任意给定的集合。如果对于任意的$x\in X$，都存在唯一地$f(x)\in Y$与之对应，则称对应关系$f$是一个从$X$到$Y$的\gls{mapping}。对任何$E\subseteq Y$，称：
	\begin{equation*}
		f^{-1}(E)=\{x:f(x)\in E\}
	\end{equation*}
	为集合$B$在映射$f$下的\gls{preimage}\footnote{原像与逆无关。}。
\end{definition}
\begin{theorem}\label{theo:PropertyOfPreimage}
	设$X,Y$是任意给定的集合，$f$是一个从$X$到$Y$的映射。集合的原像有下列性质：
	\begin{enumerate}
		\item $f^{-1}(\varnothing)=\varnothing,\;f^{-1}(Y)=X$；
		\item 若$E_1\subseteq E_2\subseteq Y$，则$f^{-1}(E_1)\subseteq f^{-1}(E_2)$；
		\item 对任意的$E\subset Y$，$[f^{-1}(E)]^c=f^{-1}(E^c)$；
		\item 设$T$是一个指标集，对$\{A_t\in\ Y:t\in T\}$，有：
		\begin{equation*}
			f^{-1}\left(\underset{t\in T}{\bigcup}A_t\right)=\underset{t\in T}{\bigcup}f^{-1}(A_t), \quad
			f^{-1}\left(\underset{t\in T}{\bigcap}A_t\right)=\underset{t\in T}{\bigcap}f^{-1}(A_t)
		\end{equation*}
	\end{enumerate}
\end{theorem}
\begin{proof}
	(1)(2)是显然的，下证(3)(4)。\par
	(3)对任意的$x\in[f^{-1}(E)]^c$，有$x\notin f^{-1}(E)$，即$f(x)\notin E$，所以$x\in f^{-1}(E^c)$。由$x$的任意性，$[f^{-1}(E)]^c\subseteq f^{-1}(E^c)$。对任意的$x\in f^{-1}(E^c)$，有$f(x)\in E^c$，所以$x\notin f^{-1}(E)$，于是$x\in[f^{-1}(E)]^c$。由$x$的任意性，$f^{-1}(E^c)\subseteq[f^{-1}(E)]^c$。综上，$[f^{-1}(E)]^c=f^{-1}(E^c)$。\par
	(4)对任意的$x\in f^{-1}\left(\underset{t\in T}{\cup}A_t\right)$，有$f(x)\in\underset{t\in T}{\cup}A_t$，即存在$t\in T$，使得$f(x)\in A_t,\;x\in f^{-1}(A_t)$，于是$x\in\underset{t\in T}{\cup}f^{-1}(A_t)$。由$x$的任意性，$f^{-1}\left(\underset{t\in T}{\cup}A_t\right)\subseteq\underset{t\in T}{\cup}f^{-1}(A_t)$。对任意的$x\in\underset{t\in T}{\cup}f^{-1}(A_t)$，则存在$t\in T$，使得$x\in f^{-1}(A_t)$，于是$x\in f^{-1}\left(\underset{t\in T}{\cup}A_t\right)$。由$x$的任意性，$\underset{t\in T}{\cup}f^{-1}(A_t)\subseteq f^{-1}\left(\underset{t\in T}{\cup}A_t\right)$。综上，$f^{-1}\left(\underset{t\in T}{\cup}A_t\right)=\underset{t\in T}{\cup}f^{-1}(A_t)$。交的情形同理可证。
\end{proof}
\begin{definition}
	设$T$是一个$X$到$Y$的映射。如果对任意的$y\in Tx$，只有唯一的$x$使得$Tx=y$，那么称映射$T$为\gls{InjectiveF}。
\end{definition}
\begin{definition}
	设$T$是一个$X$到$Y$的映射。如果对任意的$y\in Y$，都存在$X$中的$x$使得$Tx=y$，那么称映射$T$为\gls{SurjectiveF}。
\end{definition}
\begin{definition}
	设$T$是一个$X$到$Y$的映射。如果$T$既是单射，又是满射，则称之为\gls{BijectiveF}。
\end{definition}
\begin{definition}
	设$T$是一个$X$到$Y$的双射，即对任意的$y\in Y$，都存在唯一的$x\in X$使得$Tx=y$，此时可以得到一个新的映射，它将$Y$映成$X$，称这个映射为$T$的\gls{InverseMap}。
\end{definition}
\begin{theorem}
	设$T$是一个$X$到$Y$的映射。$T$存在逆映射的充要条件是$T$是一个双射。
\end{theorem}
\begin{definition}
	设$T_1$是一个$X$到$Y$的映射，$T_2$是一个$Y$到$Z$的映射。定义映射$T_3$满足$T_3x=T_2(T_1x)$，其中$x\in X$，则称映射$T_3$是映射$T_1$和映射$T_2$的\gls{CompositeMap}，记作$T_2\circ T_1$。
\end{definition}
\begin{definition}
	设$(X,\rho_X)$和$(Y,\rho_Y)$都是度量空间，$T$是一个$X$到$Y$的双射。若对任意的$x,y\in X$，有$\rho_X(x,y)=\rho_Y(Tx,Ty)$，则称$T$是$X$到$Y$上的\gls{isometry}。如果存在一个$X$到$Y$上的等距映射，则称$X$和$Y$\gls{isometric}。
\end{definition}
\begin{theorem}
	设$(X,\rho_X)$是一个度量空间，则一定存在一个完备度量空间$(Y,\rho_Y)$，使得$X$与$Y$的一个稠密子空间等距同构，并且$Y$在等距同构的意义下是唯一的\footnote{这里的唯一性是指，如果存在另一个完备度量空间$(Z,\rho_Z)$使得$X$与$Z$的一个稠密子空间等距同构，则$Y$与$Z$等距同构。}。
\end{theorem}
证明太复杂，不提供。
\subsection{映射的连续性}
\begin{definition}
	设$(X,\rho_X)$和$(Y,\rho_Y)$都是度量空间，$T$是一个$X$到$Y$的映射，$x_0\in X$。若对任意的$\varepsilon>0$，存在$\delta>0$，使得对$X$中一切满足条件$\rho(x_0,x)<\delta$的$x$，都有$\rho_Y(Tx_0,Tx)<\varepsilon$，则称$T$在$x_0$处是\gls{continuous}。
\end{definition}
\begin{theorem}
	设$(X,\rho_X)$和$(Y,\rho_Y)$都是度量空间，$T$是一个$X$到$Y$的映射，那么$T$在$x_0\in X$处连续的充分必要条件为：当$x_n\to x_0$时，$Tx_n\to Tx_0$。
\end{theorem}
\begin{proof}
	必要性显然。\par
	充分性：若此时$T$在$x_0$不连续，那么$\exists\;\varepsilon>0$，$\forall\;\delta>0$，都存在满足条件$\rho_X(x_0,x)<\delta$的点$x$使得$\rho_Y(Tx_0,Tx)\geqslant\varepsilon$，因此可取一个点列$\{x_n\}$，满足$\rho_X(x_0,x_n)<\dfrac{1}{n}$。注意到此时满足$x_n\to x$但不满足$Tx_n\to Tx_0$，矛盾。
\end{proof}
\begin{definition}
	设$T$是一个$(X,\rho_X)$到$(Y,\rho_Y)$的映射，若$T$在$X$的每一点都连续，则称$T$是$X$上的\gls{ContinuousMap}。
\end{definition}
\begin{theorem}\label{theo:ContinousMapO2OC2C}
	度量空间$(X,\rho_X)$到$(Y,\rho_Y)$上的映射$T$是$X$上连续映射的充要条件为：
	\begin{enumerate}
		\item $Y$中任意开集$E$的原像$T^{-1}E$是$X$中的开集。
		\item $Y$中任意闭集$E$的原像$T^{-1}E$是$X$中的闭集。
	\end{enumerate}
\end{theorem}
\begin{proof}
	(1)\textbf{必要性：}设$T$是连续映射，$E\subseteq Y$是一个开集，如果$T^{-1}E=\varnothing$，则$T^{-1}E$是开集；若$T^{-1}E\ne\varnothing$，任取$x\in T^{-1}E$，令$Tx=y$，则$y\in E$，因为$E$是开集，所以存在$y$的$\varepsilon$邻域$U$，使得$U\subseteq E$，由$T$的连续性，存在$x$的$\delta$邻域$V$，使得$TV\subseteq U$，因此$V\subseteq T^{-1}U\subseteq T^{-1}E$，即$x$是$T^{-1}E$的内点。由$x$的任意性，$T^{-1}E$是$X$中的开集。\par
	\textbf{充分性：}对任意的$x\in X$及$Tx$的任意$\varepsilon$邻域$U$，由\cref{prop:OpenClosedSet}(1)可知$U$是一个开集，因此$T^{-1}U$是$X$中的开集，所以$x$是$T^{-1}U$的内点，于是存在$x$的某个$\delta$邻域$V$，使得$V\subseteq T^{-1}U$，因此$TV\subseteq U$，即$T$在$x$处连续。由$x$的任意性，$T$是$X$上的连续映射。\par
	(2)由(1)、\cref{theo:PropertyOfPreimage}(3)和\cref{prop:OpenClosedSet}(5)立即可得。
\end{proof}
\begin{definition}
	设$(X,\rho_X)$和$(Y,\rho_Y)$都是度量空间，$T$是一个$X$到$Y$的双射。若$T$和$T^{-1}$都是连续映射，则称$T$是$X$到$Y$上的\gls{HomeoMap}。如果存在一个$X$到$Y$上的同胚映射，则称$X$和$Y$\gls{homeomorphic}。
\end{definition}

\subsection{压缩映射原理}
\begin{definition}
	若点$\varphi$在映射$T$的作用下满足$T\varphi=\varphi$，则称$\varphi$是映射$T$的一个\gls{FixedP}。
\end{definition}
\begin{definition}
	设$(X,\rho)$是一个度量空间，$T$是$X$到$X$的一个映射，如果存在一个数$\alpha$，$0\leqslant\alpha<1$，使得对任意的$x,y\in X$，有：
	\begin{equation*}
		\rho(Tx,Ty)\leqslant\alpha\rho(x,y)
	\end{equation*}
	则称$T$是一个\gls{ContractionMap}。
\end{definition}
\begin{theorem}[Contraction Mapping Theorem]\label{theo:ContractionMapTheorem}
	设$(X,\rho)$是一个完备的度量空间，$T$是$X$到$X$的一个压缩映射，那么$T$有且只有一个不动点。
\end{theorem}
\begin{proof}
	\textbf{存在性：}任取$x_0\in X$，令$x_n=T^nx_0$，由此产生一个点列$\{x_n\}$。下面我们来证明这个点列是一个Cauchy点列，它的极限就是一个不动点。\par
	\begin{align*}
		\rho(x_{m+1},x_m)&=\rho(Tx_m,Tx_{m-1})\leqslant\alpha\rho(x_m,x_{m+1}) \\
		&=\cdots \\
		&=\alpha^{m-1}\rho(Tx_1,Tx_0)\leqslant\alpha^m\rho(x_1,x_0)
	\end{align*}
	取$n>m$，由距离的三角不等式：
	\begin{align*}
		\rho(x_m,x_n)
		&\leqslant\rho(x_m,x_{m+1})+\cdots+\rho(x_{n-1},x_n) \\
		&\leqslant(\alpha^m+\alpha^{m+1}+\cdots+\alpha^{n-1})\rho(x_0,x_1) \\
		&=\alpha^m\frac{1-\alpha^{n-m}}{1-\alpha}\rho(x_0,x_1) \\
		&<\frac{\alpha^m}{1-\alpha}\rho(x_0,x_1)
	\end{align*}
	因为$0\leqslant\alpha<1$，所以当$m$足够大的时候，$\rho(x_m,x_n)\rightarrow 0$，即$\{x_n\}$是$X$中的Cauchy点列。又因为$X$完备，所以$\{x_n\}\rightarrow x\in X$。由三角不等式：
	\begin{equation*}
		\rho(x,Tx)\leqslant\rho(x,x_m)+\rho(x_m,Tx)\leqslant\rho(x,x_m)+\alpha\rho(x_{m-1},x)
	\end{equation*}
	当$m\to+\infty$时上式右端趋于0，因此$\rho(x,Tx)=0$，即$Tx=x$，$T$存在一个不动点。\par
	\textbf{唯一性：}假设$T$还有一个不动点$y$，则
	\begin{equation*}
		\rho(x,y)=\rho(Tx,Ty)\leqslant\alpha\rho(x,y)
	\end{equation*}
	因为$0\leqslant\alpha<1$，所以$\rho(x,y)=0$，即$x=y$，唯一性得证。
\end{proof}
压缩映射原理有一个推广：
\begin{theorem}
	设$T$是完备度量空间$X$到自身的映射，如果存在常数$\alpha$及$n_0\in\mathbb{N}^+$，$0\leqslant\alpha<1$，使得对任意$x,y\in X$，有：
	\begin{equation*}
		\rho(T^{n_0}x,T^{n_0}y)\leqslant\alpha\rho(x,y)
	\end{equation*}
	那么$T$在$X$中有且只有一个不动点。
\end{theorem}
\begin{proof}
	\textbf{存在性：}$T^{n_0}$满足\cref{theo:ContractionMapTheorem}的条件，因此$T^{n_0}$有且只有一个不动点$x_0$。下证$x_0$也是$T$在$X$中唯一的不动点。因为
	\begin{equation*}
		T^{n_0}(Tx_0)=T^{n_0+1}x_0=T(T^{n_0}x_0)=Tx_0
	\end{equation*}
	所以$Tx_0$是$T^{n_0}$的一个不动点，由不动点的唯一性，$Tx_0=x_0$，所以$x_0$是$T$的一个不动点。\par
	\textbf{唯一性：}若$T$存在另一个不动点$x_1$，则
	\begin{equation*}
		T^{n_0}x_1=T^{n_0-1}Tx_1=T^{n_0-1}x_1=\cdots=Tx_1=x_1
	\end{equation*}
	即$x_1$也是$T^{n_0}$的一个不动点，由$T^{n_0}$不动点的唯一性，$x_0=x_1$。
\end{proof}
